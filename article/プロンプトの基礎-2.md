# プロンプトの基礎-2

## 高度なプロンプトテクニック

### Chain of Thought (思考の連鎖)
AIに段階的に考えさせる手法です。

```
問題: 15個のリンゴがあります。3人で均等に分けた後、
各人がさらに2個ずつ食べました。残りは何個ですか？

ステップバイステップで考えてください：
1. まず、15個を3人で分けます
2. 次に、各人が2個ずつ食べます
3. 最後に、残りを計算します
```

### Few-Shot Learning
複数の例を示すことで、パターンを学習させます。

```
例1:
入力: 「今日は良い天気ですね」
感情: ポジティブ

例2:
入力: 「最悪の一日だった」
感情: ネガティブ

例3:
入力: 「明日は雨が降るかもしれません」
感情: 中立

では、以下の文の感情を判定してください：
入力: 「この映画は素晴らしかった」
感情:
```

### Zero-Shot vs Few-Shot vs Many-Shot

| 手法 | 説明 | 使用例 |
|------|------|--------|
| Zero-Shot | 例を示さずに直接指示 | 一般的なタスク |
| Few-Shot | 数個の例を示す | パターン認識が必要なタスク |
| Many-Shot | 多数の例を示す | 複雑なフォーマット変換 |

## プロンプトの最適化

### 1. 温度とパラメータ調整
- **温度（Temperature）**: 0.0-1.0の範囲で創造性を制御
  - 低い値（0.0-0.3）: 決定的、一貫性のある出力
  - 高い値（0.7-1.0）: 創造的、多様な出力

### 2. システムプロンプトの活用
```
システム: あなたは親切で知識豊富なプログラミング講師です。
初心者にもわかりやすく、具体例を交えて説明してください。

ユーザー: Pythonの変数について教えてください。
```

### 3. コンテキストウィンドウの管理
- 長い会話では重要な情報を要約
- 必要な情報のみを含める
- 古い情報は削除または要約

## 実践的なプロンプトパターン

### パターン1: タスク分解
```
大きなタスクを以下のステップに分解してください：
1. [タスク内容]

各ステップについて：
- 必要なリソース
- 予想される課題
- 完了の基準
を明記してください。
```

### パターン2: ペルソナ設定
```
あなたは10年の経験を持つデータサイエンティストです。
以下の条件で回答してください：
- 専門用語を使う場合は説明を添える
- 実務での経験に基づいた助言をする
- データの可視化例を含める
```

### パターン3: 制約付き生成
```
以下の制約に従ってコードを生成してください：
- 言語: Python 3.10以上
- ライブラリ: 標準ライブラリのみ
- 最大行数: 50行
- コメント: 各関数に説明を含める
- エラーハンドリング: 必須
```

## デバッグとトラブルシューティング

### よくある問題

1. **ハルシネーション（幻覚）**
   - 解決策: 事実確認を求める、ソースを明示させる
   ```
   回答する際は、確信が持てない情報については
   「確実ではありませんが」と前置きしてください。
   ```

2. **指示の無視**
   - 解決策: 重要な指示を強調、繰り返す
   ```
   重要: 必ず日本語で回答してください。
   これは必須要件です。
   ```

3. **出力形式の不一致**
   - 解決策: 具体的な例を示す
   ```
   以下の形式で出力してください：
   {
     "name": "例",
     "value": 123
   }
   ```

## プロンプトエンジニアリングのベストプラクティス

### ✅ 推奨事項
- 明確で具体的な指示
- 適切な例の提供
- 出力形式の明示
- 段階的なアプローチ
- フィードバックループの構築

### ❌ 避けるべきこと
- 曖昧な表現
- 矛盾する指示
- 過度に複雑な要求
- 不必要な情報の追加
- 倫理的に問題のある要求

## まとめ

高度なプロンプトテクニックを習得することで、AIの能力を最大限に引き出すことができます。継続的な実験と改善が、より良い結果につながります。

## 参考リソース

- プロンプトエンジニアリングガイド
- AIモデルのドキュメント
- コミュニティのベストプラクティス
- 実践的なプロンプト集
